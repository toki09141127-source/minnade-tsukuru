import React from 'react'

export const metadata = {
  title: '利用規約 | みんなで作ろう（仮）',
}

const LAST_UPDATED = '2026-02-12'

function getContactEmail() {
  // ダミーのメールアドレスは出さない（運用で差し替えやすい形）
  const fromEnv =
    process.env.NEXT_PUBLIC_SUPPORT_EMAIL ||
    process.env.SUPPORT_EMAIL ||
    process.env.CONTACT_EMAIL ||
    ''
  return fromEnv.trim()
}

type Section = {
  id: string
  title: string
  body: React.ReactNode
}

export default function TermsPage() {
  const contactEmail = getContactEmail()

  const sections: Section[] = [
    {
      id: 'apply',
      title: '第1条（適用）',
      body: (
        <>
          <p>
            本利用規約（以下「本規約」といいます。）は、みんなで作ろう（仮）（以下「本サービス」といいます。）の提供条件および
            本サービスの利用に関する運営者とユーザー（第2条で定義）の権利義務関係を定めるものです。
          </p>
          <ul>
            <li>ユーザーは、本規約に同意のうえ本サービスを利用するものとします。</li>
            <li>
              本サービス内で別途定めるガイドライン・注意事項等（名称を問わず。以下「個別規定」）は、本規約の一部を構成します。
            </li>
            <li>本規約と個別規定が矛盾する場合、個別規定が優先します（個別規定に別段の定めがある場合を除きます）。</li>
          </ul>
        </>
      ),
    },
    {
      id: 'defs',
      title: '第2条（定義）',
      body: (
        <>
          <p>本規約で用いる用語の定義は、以下のとおりとします。</p>
          <ul>
            <li>
              「運営者」：本サービスを運営・提供する者（個人・法人を問いません）をいいます。
            </li>
            <li>
              「ユーザー」：本規約に同意し、本サービスを利用するすべての者をいいます。
            </li>
            <li>
              「アカウント」：ユーザーを識別するために本サービス上で付与・管理される利用者情報をいいます。
            </li>
            <li>
              「ルーム」：最大50人程度が同一の制作空間に参加し、制限時間内に共同制作を行う単位をいいます（閲覧・参加形態は本サービスの仕様に従います）。
            </li>
            <li>
              「投稿」：ユーザーが本サービス上に送信・アップロード・入力する文章、画像、漫画、イラスト、リンク、コメント、その他一切の情報をいいます。
            </li>
            <li>
              「成果物」：ルーム等で制作・共有される作品（完成・未完成を問わず）およびその制作過程の出力をいいます。
            </li>
            <li>
              「コンテンツ」：投稿、成果物、プロフィール情報、ルーム情報、その他本サービス上の情報の総称をいいます。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'account',
      title: '第3条（利用登録・アカウント）',
      body: (
        <>
          <ul>
            <li>本サービスの利用には、運営者が指定する方法によりアカウント登録が必要となる場合があります。</li>
            <li>ユーザーは、登録情報を真実かつ正確に入力し、常に最新の状態に保つものとします。</li>
            <li>
              ユーザーは、自己の責任においてアカウント情報（メールアドレス、パスワード等）を管理し、第三者に利用させないものとします。
            </li>
            <li>
              アカウントの不正利用によりユーザーに生じた損害について、運営者に故意または重過失がある場合を除き、運営者は責任を負いません。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'minor',
      title: '第4条（未成年の利用）',
      body: (
        <>
          <ul>
            <li>未成年のユーザーは、親権者その他法定代理人の同意を得たうえで本サービスを利用するものとします。</li>
            <li>
              未成年のユーザーが本サービスを利用した場合、運営者は、法定代理人の同意があったものとみなすことがあります。
            </li>
            <li>
              成人向け（R18）コンテンツが含まれうるため、未成年のユーザーは、年齢に不適切な表現を含むコンテンツの閲覧・投稿を控えてください。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'prohibited',
      title: '第5条（禁止事項）',
      body: (
        <>
          <p>ユーザーは、本サービスの利用にあたり、以下の行為をしてはなりません。</p>
          <ul>
            <li>法令または公序良俗に違反する行為</li>
            <li>犯罪行為に関連する行為、または犯罪を助長・教唆する行為</li>
            <li>第三者の著作権、商標権、肖像権、プライバシーその他の権利・利益を侵害する行為</li>
            <li>個人情報（住所、電話番号、メール、学校名、SNSアカウント等を含む）の晒し、収集、共有、なりすまし行為</li>
            <li>他者への誹謗中傷、差別、脅迫、嫌がらせ、ストーキング、過度な煽動、名誉毀損となる行為</li>
            <li>過度に暴力的・残虐な表現、わいせつ表現、児童の性的搾取を示唆または含む表現（疑いを含む）</li>
            <li>反社会的勢力への利益供与、またはこれに準ずる行為</li>
            <li>スパム、荒らし、過度な連投、機械的投稿、無差別勧誘、広告・宣伝の押し付け</li>
            <li>本サービスのサーバー・ネットワーク・ソフトウェアに過度な負荷をかける行為</li>
            <li>不正アクセス、リバースエンジニアリング、脆弱性探索、スクレイピング等（運営者が明示的に許可した場合を除く）</li>
            <li>ルームの共同制作を妨害する行為（嫌がらせ、進行妨害、他者の成果の無断改変・破壊等）</li>
            <li>運営者または第三者になりすます行為、虚偽情報の流布</li>
            <li>その他、運営者が不適切と合理的に判断する行為</li>
          </ul>
          <p className="muted" style={{ marginTop: 10 }}>
            ※R18コンテンツ自体を一律禁止するものではありませんが、後述の「投稿内容の取扱い」「削除・非表示」等に従い、適切な区分・配慮が必要です。
          </p>
        </>
      ),
    },
    {
      id: 'content-handling',
      title: '第6条（投稿内容・コンテンツの取扱い）',
      body: (
        <>
          <ul>
            <li>ユーザーは、自身の投稿について、必要な権利（著作権・利用許諾等）を有すること、または適法な許諾を得ていることを保証します。</li>
            <li>
              運営者は、本サービスの運営・改善・不正対策・問い合わせ対応等のため、投稿やログ等を閲覧・確認する場合があります（必要最小限）。
            </li>
            <li>
              ユーザーは、投稿が公開される可能性（ルーム内、完成作品ページ、ランキング等）を理解し、公開範囲の仕様は本サービスの表示・設定に従うものとします。
            </li>
            <li>
              ユーザーは、他ユーザーの投稿や成果物を、権利者の許諾なく転載・再配布・販売・AI学習素材として利用等してはなりません（法令上許容される場合を除きます）。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'ip',
      title: '第7条（著作権・知的財産権）',
      body: (
        <>
          <ul>
            <li>
              本サービスに関する著作権、商標権その他一切の知的財産権は、運営者または正当な権利者に帰属します。
            </li>
            <li>
              ユーザーが投稿したコンテンツの著作権等は、原則として当該ユーザーまたは正当な権利者に帰属します（共同制作の場合は第8条参照）。
            </li>
            <li>
              ユーザーは、運営者に対し、本サービスの提供・運営・改善・宣伝（本サービス内外での紹介を含む）に必要な範囲で、
              投稿を無償で利用（複製、表示、配信、翻訳、要約、形式変換、サムネイル生成等）する非独占的ライセンスを許諾するものとします。
              ただし、ユーザーが合理的に望まない用途がある場合、運営者は可能な範囲で配慮します（お問い合わせ窓口へご連絡ください）。
            </li>
            <li>
              権利侵害の申告（著作権侵害、肖像権侵害等）があった場合、運営者は、必要に応じて当該コンテンツの一時非表示・削除等を行い、当事者へ連絡することがあります。
            </li>
            <li>
              引用・二次創作・ファンアート等は、権利者のガイドラインおよび法令に従ってください。ユーザー間のトラブルは原則当事者間で解決するものとします。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'collab',
      title: '第8条（共同制作に関する注意）',
      body: (
        <>
          <p>
            本サービスは、最大50人が同一ルームで制限時間内に共同制作を行う性質を持ちます。
            共同制作では、成果物の権利関係や利用範囲について、参加者間で認識違いが生じやすい点にご注意ください。
          </p>
          <ul>
            <li>
              成果物（共同制作の最終アウトプットや制作過程）の権利帰属・利用条件は、当事者間の合意により定まるのが原則です。
            </li>
            <li>
              運営者は、共同制作の当事者ではなく、成果物の権利関係・分配・クレジット等を保証しません。
            </li>
            <li>
              トラブル防止のため、ルーム内で「利用範囲」「クレジット」「二次利用（SNS掲載、同人、商用等）」について合意を形成し、記録（ルーム投稿等）することを推奨します。
            </li>
            <li>
              合意がない場合、他者の寄与（素材・アイデア・文章・絵等）を無断で単独利用・商用利用することは避けてください。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'privacy',
      title: '第9条（個人情報・プライバシー）',
      body: (
        <>
          <p>
            運営者は、ユーザーの個人情報およびプライバシーに配慮し、適用法令を遵守して適切に取り扱います。
            本条は、本サービス内の簡易なプライバシー方針として機能します（将来的にプライバシーポリシーを別ページ化する場合があります）。
          </p>
          <div className="cardSub">
            <div className="lead">収集する情報の例</div>
            <ul>
              <li>アカウント登録情報（メールアドレス等）</li>
              <li>プロフィール情報（ユーザー名、SNSリンク等。ユーザーが入力した範囲）</li>
              <li>投稿・ルーム・成果物等のコンテンツ</li>
              <li>アクセスログ、端末情報、IPアドレス、Cookie等の識別子、利用状況（不正対策・改善目的）</li>
            </ul>
          </div>
          <div className="cardSub">
            <div className="lead">利用目的</div>
            <ul>
              <li>本サービスの提供、本人確認、認証、アカウント管理</li>
              <li>共同制作機能の提供、投稿の表示、ランキング等の機能提供</li>
              <li>不正行為の防止、セキュリティ対策、利用規約違反対応</li>
              <li>問い合わせ対応、重要なお知らせの通知</li>
              <li>品質向上・機能改善のための分析（個人が特定されない形での統計化を含む）</li>
            </ul>
          </div>
          <div className="cardSub">
            <div className="lead">第三者提供・委託</div>
            <ul>
              <li>運営者は、法令に基づく場合を除き、本人の同意なく個人情報を第三者に提供しません。</li>
              <li>認証・ホスティング等の業務委託先（例：認証基盤、ホスティング事業者等）に必要な範囲で委託する場合があります。</li>
            </ul>
          </div>
          <div className="cardSub">
            <div className="lead">保管・削除・安全管理</div>
            <ul>
              <li>運営者は、合理的な期間・範囲で情報を保管し、目的達成後は適切な方法で削除・匿名化に努めます。</li>
              <li>不正アクセス等を防止するため、合理的な安全管理措置を講じます（ただし完全な安全を保証するものではありません）。</li>
              <li>ユーザーは、アカウント削除・投稿削除等の機能がある場合、当該機能の範囲で削除を申請できます。</li>
            </ul>
          </div>
        </>
      ),
    },
    {
      id: 'links-ads',
      title: '第10条（外部リンク・広告）',
      body: (
        <>
          <ul>
            <li>本サービスには、外部サイトへのリンクが含まれる場合があります。運営者は外部サイトの内容・安全性を保証しません。</li>
            <li>本サービス上に広告・告知が掲載される場合があります。広告主との取引・紛争はユーザーと広告主の間で解決するものとします。</li>
          </ul>
        </>
      ),
    },
    {
      id: 'service-change',
      title: '第11条（サービスの変更・停止・終了）',
      body: (
        <>
          <ul>
            <li>運営者は、運営上必要な場合、ユーザーへの事前告知なく本サービスの内容を変更できることがあります。</li>
            <li>運営者は、システム保守、障害対応、負荷集中、不可抗力等により、本サービスの全部または一部を停止することがあります。</li>
            <li>運営者は、本サービスを終了する場合、合理的な期間をもって告知するよう努めます（緊急の場合を除く）。</li>
          </ul>
        </>
      ),
    },
    {
      id: 'moderation',
      title: '第12条（投稿の削除・非表示・アカウント停止等）',
      body: (
        <>
          <p>
            運営者は、本サービスの健全な運営のため、以下の場合に、コンテンツの削除・非表示、ルームからの退室、機能制限、
            アカウント停止・削除等の措置（以下「運営措置」）を行うことがあります。
          </p>
          <ul>
            <li>本規約または個別規定に違反した場合</li>
            <li>権利侵害の申告があり、合理的に必要と判断した場合</li>
            <li>第三者の個人情報の晒し、誹謗中傷、差別、暴力的・わいせつ・児童性的搾取を含むおそれがある場合</li>
            <li>スパム・荒らし・不正アクセス等、サービス運営に支障を与える場合</li>
            <li>その他、運営者が合理的に必要と判断した場合</li>
          </ul>
          <div className="cardSub">
            <div className="lead">手続・連絡</div>
            <ul>
              <li>運営者は、可能な範囲で、運営措置の理由・内容をユーザーに通知するよう努めます（緊急性が高い場合を除きます）。</li>
              <li>ユーザーは、運営措置に異議がある場合、お問い合わせ窓口から申し立てることができます。</li>
              <li>運営者は、再発防止のため、必要に応じて追加の確認や情報提供を求めることがあります。</li>
            </ul>
          </div>
        </>
      ),
    },
    {
      id: 'disclaimer',
      title: '第13条（免責）',
      body: (
        <>
          <ul>
            <li>運営者は、本サービスがユーザーの特定の目的に適合すること、期待する機能・正確性・有用性を有することを保証しません。</li>
            <li>共同制作における成果物の品質、権利関係、クレジット、収益分配等について、運営者は保証しません。</li>
            <li>
              ユーザー間またはユーザーと第三者との間で生じた紛争（権利侵害、共同制作のトラブル等）は、原則として当事者間で解決するものとします。
            </li>
            <li>運営者は、通信回線や端末環境、外部サービスの障害により生じた損害について責任を負いません（故意・重過失を除く）。</li>
          </ul>
        </>
      ),
    },
    {
      id: 'limitation',
      title: '第14条（責任制限）',
      body: (
        <>
          <p>
            運営者が本サービスに関してユーザーに損害賠償責任を負う場合であっても、運営者に故意または重過失がある場合を除き、
            運営者の責任は、通常生ずべき直接損害に限られます。
          </p>
          <ul>
            <li>
              本サービスが有償となる場合、運営者が負う損害賠償の上限は、当該損害が発生した月にユーザーが運営者に支払った利用料金の額を上限とします。
            </li>
            <li>
              本サービスが無償で提供される場合、運営者が負う損害賠償の上限は、合理的な範囲で運営者が相当と判断する額（上限1万円）とします。
            </li>
          </ul>
          <p className="muted">
            ※上記は、消費者契約法その他の強行法規により制限される場合があります。その場合は当該法令が優先されます。
          </p>
        </>
      ),
    },
    {
      id: 'changes',
      title: '第15条（規約の変更）',
      body: (
        <>
          <ul>
            <li>運営者は、必要に応じて本規約を変更できます。</li>
            <li>
              変更後の規約は、本サービス上での掲示その他運営者が適切と判断する方法により周知し、周知後にユーザーが本サービスを利用した場合、
              ユーザーは変更後の規約に同意したものとみなします。
            </li>
            <li>重要な変更については、合理的な方法で事前告知に努めます。</li>
          </ul>
        </>
      ),
    },
    {
      id: 'law',
      title: '第16条（準拠法・裁判管轄）',
      body: (
        <>
          <ul>
            <li>本規約の準拠法は日本法とします。</li>
            <li>
              本サービスに関して紛争が生じた場合、運営者の所在地を管轄する日本国内の裁判所を第一審の専属的合意管轄裁判所とします。
            </li>
          </ul>
        </>
      ),
    },
    {
      id: 'contact',
      title: '第17条（お問い合わせ）',
      body: (
        <>
          <p>本規約や本サービスに関するお問い合わせは、以下の窓口までお願いします。</p>
          {contactEmail ? (
            <ul>
              <li>
                メール：<a href={`mailto:${contactEmail}`}>{contactEmail}</a>
              </li>
            </ul>
          ) : (
            <div
              style={{
                marginTop: 10,
                padding: 12,
                border: '1px solid rgba(0,0,0,0.12)',
                borderRadius: 12,
                background: 'rgba(0,0,0,0.03)',
              }}
            >
              <div style={{ fontWeight: 800, marginBottom: 6 }}>問い合わせ先メールが未設定です</div>
              <div style={{ fontSize: 14, lineHeight: 1.8 }}>
                本番運用では環境変数で設定してください：
                <br />
                <code>NEXT_PUBLIC_SUPPORT_EMAIL</code>（推奨） または <code>SUPPORT_EMAIL</code>
              </div>
            </div>
          )}
        </>
      ),
    },
  ]

  const toc = sections.map((s) => ({ id: s.id, title: s.title }))

  return (
    <div className="main">
      <h1 className="h1">利用規約</h1>

      <div className="muted" style={{ marginTop: 8 }}>
        最終更新日：{LAST_UPDATED}
      </div>

      <div className="readableBox" style={{ marginTop: 14 }}>
        <div style={{ fontWeight: 900, marginBottom: 8 }}>目次</div>
        <ul style={{ margin: 0, paddingLeft: 18, lineHeight: 1.9 }}>
          {toc.map((t) => (
            <li key={t.id}>
              <a href={`#${t.id}`}>{t.title}</a>
            </li>
          ))}
        </ul>
      </div>

      <div className="readableBox" style={{ marginTop: 14 }}>
        <p className="muted" style={{ marginTop: 0 }}>
          本サービスは「最大50人が同一ルームで制限時間内に制作する共同制作サービス」です。
          共同制作の性質上、権利・クレジット・二次利用の扱いはトラブルになりやすいため、
          本規約を踏まえつつ、当事者間での合意形成（ルーム内での明示）を推奨します。
        </p>

        {sections.map((sec) => (
          <section key={sec.id} id={sec.id} style={{ marginTop: 18 }}>
            <h2 style={{ fontSize: 16, margin: '18px 0 8px', lineHeight: 1.35 }}>
              {sec.title}
            </h2>
            <div className="prose">{sec.body}</div>
          </section>
        ))}
      </div>
    </div>
  )
}
